function ComponentPropsSkinSelector(i){if(!window.oBXSkinSelectors)window.oBXSkinSelectors=[];var e;for(var s=0,t=window.oBXSkinSelectors.length;s<t;s++){e=window.oBXSkinSelectors[s];if(!e)continue;if(e.pWnd.parentNode==i.oCont){e.Suicide();e=null}else{if(e.Popup)e.ClosePopup()}}var n=new BXSkinSelector(i);i.oCont.insertBefore(n.pWnd,i.oCont.lastChild);window.oBXSkinSelectors.push(n)}function BXSkinSelector(arParams){jsUtils.loadCSSFile("/bitrix/components/bitrix/player/js/skin_selector.css");var _this=this;this.arElements=arParams.getElements();this.pInput=arParams.oInput;this.fChange=arParams.fChange||false;var jsParams={};try{jsParams=eval(arParams.data)}catch(e){}this.Mess=jsParams[1];this.arSkins=jsParams[0]||[];this.arSkins=[{name:"Default Skin",filename:""}].concat(this.arSkins);this.pWnd=jsUtils.CreateElement("DIV",{className:"bx-skin-select-div"});this.pWnd.onclick=function(){_this.ShowPopup()};setTimeout(function(){_this.OnChange(false,false)},10)}BXSkinSelector.prototype={OnChange:function(i,e){var s=this.pInput.value,t,n=this.arSkins.length;if(!i){for(t=0;t<n;t++){if(this.arSkins[t].filename==s){i=this.arSkins[t];break}}}if(!i){this.pInput.value="";return this.OnChange()}while(this.pWnd.firstChild)this.pWnd.removeChild(this.pWnd.firstChild);if(e!==false&&this.fChange&&typeof this.fChange=="function")this.fChange();this.pWnd.appendChild(document.createTextNode(i.name))},ShowPopup:function(){var i=this;if(this.bPopupShowed)return this.ClosePopup();if(!this.Popup)this.CreatePopup();this.Popup.style.display="block";this.bPopupShowed=true;this.Popup.style.zIndex=4e3;var e=BX.pos(this.pWnd);this.pCont=BX("bx_popup_content");if(!this.pCont)this.pCont=jsUtils.FindParentObject(this.pInput,"DIV","c2dialog_propdiv");if(!this.pCont)this.pCont=jsUtils.FindParentObject(this.pInput,"DIV","bxtaskbarprops");if(this.pCont)jsUtils.addEvent(this.pCont,"scroll",window.BX_PLAYER_SKIN_PARAM_CLOSE);jsFloatDiv.Show(this.Popup,e.left,e.top+20,5,false,false);var s=this.arDivs[this.pInput.value||"-"];s.appendChild(this.pSelectMask);if(window.jsPopup)window.jsPopup.DenyClose(true);if(window.GLOBAL_pMainObj){for(var t in GLOBAL_pMainObj){if(typeof GLOBAL_pMainObj[t]=="object"&&GLOBAL_pMainObj[t].pC2PropsDialog)GLOBAL_pMainObj[t].pC2PropsDialog.bDenyClose=true}}jsUtils.addEvent(document,"keypress",window.BX_PLAYER_SKIN_PARAM_CLOSE);setTimeout(function(){jsUtils.addEvent(document,"click",window.BX_PLAYER_SKIN_PARAM_CLOSE)},10)},ClosePopup:function(){this.Popup.style.display="none";this.bPopupShowed=false;jsFloatDiv.Close(this.Popup);jsUtils.removeEvent(document,"keypress",window.BX_PLAYER_SKIN_PARAM_CLOSE);jsUtils.removeEvent(document,"click",window.BX_PLAYER_SKIN_PARAM_CLOSE);if(this.pCont)jsUtils.removeEvent(this.pCont,"scroll",window.BX_PLAYER_SKIN_PARAM_CLOSE);if(window.jsPopup)window.jsPopup.DenyClose(false);if(window.GLOBAL_pMainObj){for(var i in GLOBAL_pMainObj){if(typeof GLOBAL_pMainObj[i]=="object"&&GLOBAL_pMainObj[i].pC2PropsDialog)GLOBAL_pMainObj[i].pC2PropsDialog.bDenyClose=false}}},CreatePopup:function(){var i=this,e,s,t,n=this.arSkins.length;this.arDivs={};this.Popup=document.body.appendChild(BX.create("DIV",{props:{className:"bx-skin-popup"}}));var p=this.Popup.appendChild(BX.create("DIV",{props:{className:"bx-skin-popup-inner"}}));this.pSelectMask=BX.create("DIV",{props:{className:"bx-skin-sel-mask"}});for(e=0;e<n;e++){s=p.appendChild(BX.create("DIV",{props:{id:"bx_par_skin_"+e,className:"bx-preview-pic",title:this.arSkins[e].name}}));pTitle=s.appendChild(BX.create("DIV",{props:{className:"bx-skin-prev-title"},text:this.arSkins[e].name}));if(this.arSkins[e].filename==""){s.appendChild(jsUtils.CreateElement("IMG",{src:"/bitrix/components/bitrix/player/images/default_skin.png"}))}else if(this.arSkins[e].preview){s.appendChild(jsUtils.CreateElement("IMG",{src:this.arSkins[e].the_path+"/"+this.arSkins[e].preview}))}else{pTitle.className+=" bx-no-preview";s.appendChild(jsUtils.CreateElement("DIV",{className:"bx-skin-no-preview"})).appendChild(document.createTextNode(" - "+this.Mess.NoPreview+" - "))}s.onmouseover=function(){this.className="bx-preview-pic bx-preview-pic-over"};s.onmouseout=function(){this.className="bx-preview-pic"};s.onclick=function(){var e=i.arSkins[this.id.substr("bx_par_skin_".length)];i.pInput.value=e.filename;i.OnChange(e);i.ClosePopup()};this.arDivs[this.arSkins[e].filename||"-"]=s}window.BX_PLAYER_SKIN_PARAM_CLOSE=function(e){i.ClosePopup()}},Suicide:function(){this.ClosePopup();if(this.Popup.parentNode)this.Popup.parentNode.removeChild(this.Popup);if(this.pWnd.parentNode)this.pWnd.parentNode.removeChild(this.pWnd)}};
//# sourceMappingURL=prop_skin_selector.map.js