{"version":3,"file":"core_webrtc.min.js","sources":["core_webrtc.js"],"names":["window","BX","webrtc","this","debug","audioMuted","videoMuted","enabled","detectedBrowser","attachMediaStream","pcConfig","oneway","lastUserMediaParams","pcConstraints","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","configVideo","maxWidth","maxHeight","minWidth","minHeight","configVideoGroup","configVideoMobile","configVideoAfterError","callStreamSelf","callStreamMain","callStreamUsers","pc","pcStart","connected","iceCandidates","initiator","callUserId","callChatId","callToGroup","callGroupUsers","callInit","callInitUserId","callActive","callVideo","callRequestUserMedia","needPeerConnection","createAnswerTimeout","initPeerConnectionTimeout","iceCandidateTimeout","pcConnectTimeout","adapter","setTurnServer","inheritWebrtc","child","prototype","constructor","parent","navigator","mozGetUserMedia","userAgent","substr","indexOf","RTCPeerConnection","mozRTCPeerConnection","RTCSessionDescription","mozRTCSessionDescription","RTCIceCandidate","mozRTCIceCandidate","getUserMedia","bind","element","stream","mozSrcObject","play","webkitGetUserMedia","appVersion","webkitRTCPeerConnection","src","URL","createObjectURL","webkitMediaStream","getVideoTracks","videoTracks","getAudioTracks","audioTracks","MediaStreamTrack","getSources","e","func","getLocalStreams","localStreams","getRemoteStreams","remoteStreams","ready","params","turnServer","turnServerFirefox","turnServerLogin","turnServerPassword","iceServers","url","credential","username","optional","DtlsSrtpKeyAgreement","toggleAudio","changeVariable","length","i","toggleVideo","signalingReady","PULL","getPullServerStatus","log","text","desktop","arguments","JSON","stringify","message","console","startGetUserMedia","video","audio","onUserMediaSuccess","browser","IsFirefox","constraints","delegate","onUserMediaError","stop","userId","clearTimeout","initPeerConnection","error","name","createPeerConnection","setTimeout","sendOfferToPeer","setLocalAndSend","desc","setLocalDescription","a","onRemoteStreamAdded","event","setMainVideo","onRemoteStreamRemoved","onIceCandidate","candidates","onIceConnectionStateChange","onSignalingStateChange","peerConnectionError","peerConnectionReconnect","iceConnectionState","signalingState","close","deleteEvents","hasOwnProperty","mergeConstraints","cons1","cons2","merged","concat","MozDontOfferDataChannel","prop","createOffer","onicecandidate","onIceCandidateEvent","onaddstream","onRemoteStreamAddedEvent","onremovestream","onRemoteStreamRemovedEvent","oniceconnectionstatechange","onIceConnectionStateChangeEvent","onsignalingstatechange","onSignalingStateChangeEvent","addStream","signalingPeerData","peerData","signal","parse","type","createAnswer","setRemoteDescription","candidate","sdpMLineIndex","label","addIceCandidate","push","id","sdpMid"],"mappings":"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"}