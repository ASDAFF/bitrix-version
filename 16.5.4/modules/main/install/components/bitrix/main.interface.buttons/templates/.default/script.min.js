BX.namespace("BX.Main");if(typeof BX.Main.interfaceButtons==="undefined"){BX.Main.interfaceButtons=function(t,e){this.classItem="main-buttons-item";this.classItemSublink="main-buttons-item-sublink";this.classItemText="main-buttons-item-text";this.classItemCounter="main-buttons-item-counter";this.classItemIcon="main-buttons-item-icon";this.classItemMore="main-buttons-item-more";this.classOnDrag="main-buttons-drag";this.classDropzone="main-buttons-submenu-dropzone";this.classSeporator="main-buttons-submenu-seporator";this.classSubmenuItem="main-buttons-submenu-item";this.classItemDisabled="main-buttons-disabled";this.classItemOver="over";this.classItemActive="active";this.classSubmenu="main-buttons-submenu";this.classSecret="secret";this.classItemLocked="locked";this.submenuIdPrefix="main_buttons_popup_";this.submenuWindowIdPrefix="menu-popup-";this.listContainer=null;this.submenuContainer=null;this.pinContainer=null;this.dragItem=null;this.overItem=null;this.moreButton=null;this.messages=null;this.licenseParams=null;this.isSubmenuShown=false;this.isSubmenuShownOnDragStart=false;this.tmp={};this.init(t,e);return{getItemById:BX.delegate(this.getItemById,this),getAllItems:BX.delegate(this.getAllItems,this),getHiddenItems:BX.delegate(this.getHiddenItems,this),getVisibleItems:BX.delegate(this.getVisibleItems,this),getDisabledItems:BX.delegate(this.getDisabledItems,this),getMoreButton:BX.delegate(this.getMoreButton,this),adjustMoreButtonPosition:BX.delegate(this.adjustMoreButtonPosition,this),adjustSubmenuPosition:BX.delegate(this.adjustSubmenuPosition,this),showSubmenu:BX.delegate(this.showSubmenu,this),closeSubmenu:BX.delegate(this.closeSubmenu,this),refreshSubmenu:BX.delegate(this.refreshSubmenu,this),getCurrentSettings:BX.delegate(this.getCurrentSettings,this),saveSettings:BX.delegate(this.saveSettings,this),setCounterValueByItemId:BX.delegate(this.setCounterValueByItemId,this),getCounterValueByItemId:BX.delegate(this.getCounterValueByItemId,this),classes:{item:this.classItem,itemText:this.classItemText,itemCounter:this.classItemCounter,itemIcon:this.classItemIcon,itemDisabled:this.classItemDisabled,itemOver:this.classItemOver,itemActive:this.classItemActive,itemLocked:this.classItemLocked,submenu:this.classSubmenu,submenuItem:this.classSubmenuItem,containerOnDrag:this.classOnDrag},itemsContainer:this.listContainer,itemsContainerId:this.listContainer.id}};BX.Main.interfaceButtons.prototype={init:function(t,e){this.setListContainer(t);if(!BX.type.isPlainObject(e)){throw"BX.MainButtons: params is not Object"}if(!("containerId"in e)||!BX.type.isNotEmptyString(e.containerId)){throw"BX.MainButtons: containerId not set in params"}if(!BX.type.isDomNode(this.listContainer)){throw"BX.MainButtons: #"+e.containerId+" is not dom node"}if("classes"in e&&BX.type.isPlainObject(e.classes)){this.setCustomClasses(e.classes)}if("messages"in e&&BX.type.isPlainObject(e.messages)){this.setMessages(e.messages)}if("licenseWindow"in e&&BX.type.isPlainObject(e.licenseWindow)){this.setLicenseWindowParams(e.licenseWindow)}this.moreButton=this.getMoreButton();this.visibleControllMoreButton();this.dragAndDropInit();this.adjustMoreButtonPosition();this.bindOnClickOnMoreButton();this.createFrame();this.bindOnResizeFrame();this.bindOnScrollWindow();this.bindOnClick();this.createSubmenu();this.setSubmenuContainer(this.getSubmenuContainer());this.setContainerHeight();this.setParentPinContainer()},bindOnScrollWindow:function(){BX.bind(window,"scroll",BX.delegate(this._onScroll,this))},setParentPinContainer:function(){this.pinContainer=this.findParentByClassName(this.moreButton,"bx-pin")},getContainerHeight:function(){var t=this.getAllItems();var e,s;e=[].map.call(t,function(t){s=getComputedStyle(t);return BX.height(t)+parseInt(s.marginTop)+parseInt(s.marginBottom)});return Math.max.apply(Math,e)},setContainerHeight:function(){var t=this.getContainerHeight();BX.height(this.listContainer,t)},setLicenseWindowParams:function(t){this.licenseParams=t||{}},message:function(t){var e;try{e=this.messages[t]}catch(s){e=""}return e},setCustomClasses:function(t){if(!BX.type.isPlainObject(t)){return}this.classItem=t.item||this.classItem;this.classItemSublink=t.itemSublink||this.classItemSublink;this.classItemText=t.itemText||this.classItemText;this.classItemCounter=t.itemCounter||this.classItemCounter;this.classItemIcon=t.itemIcon||this.classItemIcon;this.classItemMore=t.itemMore||this.classItemMore;this.classItemOver=t.itemOver||this.classItemOver;this.classItemActive=t.itemActive||this.classItemActive;this.classItemDisabled=t.itemDisabled||this.classItemDisabled;this.classOnDrag=t.onDrag||this.classOnDrag;this.classDropzone=t.dropzone||this.classDropzone;this.classSeporator=t.seporator||this.classSeporator;this.classSubmenuItem=t.submenuItem||this.classSubmenuItem;this.classSubmenu=t.submenu||this.classSubmenu;this.classSecret=t.secret||this.classSecret;this.classItemLocked=t.itemLocked||this.classItemLocked},setListContainer:function(t){if(BX.type.isDomNode(t)){this.listContainer=t}},setMessages:function(t){if(!BX.type.isPlainObject(t)){return}this.messages=t},makeFullItemId:function(t){if(!BX.type.isNotEmptyString(t)){return}return[this.listContainer.id,t.replace("-","_")].join("_")},getItemById:function(t){var e=null;var s;if(BX.type.isNotEmptyString(t)){s=this.makeFullItemId(t);e=BX.findChild(this.listContainer,{attribute:{id:s}},true,false)}return e},getItemCounterObject:function(t){var e=null;if(BX.type.isDomNode(t)){e=BX.findChild(t,{"class":this.classItemCounter},true,false)}return e},setCounterValue:function(t,e){var s=this.getItemCounterObject(t);if(BX.type.isDomNode(s)){s.innerText=e>99?"99+":e;t.dataset.counter=e}},setCounterValueByItemId:function(t,e){var s=e!==null?parseFloat(e):null;var i,n;if(!BX.type.isNotEmptyString(t)){throw"Bad first arg. Need string as item id"}if(s!==null&&!BX.type.isNumber(s)){throw"Bad two arg. Need number counter value - Integer, Float or string with number"}i=this.getItemById(t);if(!BX.type.isDomNode(i)){console.info("Not found node with id #"+t);return}n=this.getItemAlias(i);this.setCounterValue(i,s);this.setCounterValue(n,s)},getCounterValueByItemId:function(t){var e,s;var i=NaN;if(!BX.type.isNotEmptyString(t)){throw"Bad first arg. Need string item id"}else{e=this.getItemById(t);i=this.dataValue(e,"counter");i=parseFloat(i);if(!BX.type.isNumber(i)){s=this.getItemCounterObject(e);i=parseFloat(s.innerText)}}return i},bindOnClickOnMoreButton:function(){BX.bind(this.moreButton,"click",BX.delegate(this._onClickMoreButton,this))},bindOnResizeFrame:function(){maininterfacebuttonstmpframe.onresize=BX.throttle(this._onResizeHandler,20,this)},bindOnClick:function(){var t=this.getAllItems();var e=this;if(!t||!t.length){return}[].forEach.call(t,function(t){BX.bind(t,"click",BX.delegate(e._onClick,e))})},createFrame:function(){this.tmp.frame=BX.create("iframe",{props:{height:"100%",width:"100%",id:"maininterfacebuttons-tmp-frame",name:"maininterfacebuttonstmpframe"},style:{position:"absolute","z-index":"-1",opacity:0}});this.listContainer.parentNode.appendChild(this.tmp.frame)},getAllItems:function(){return this.listContainer.children},getVisibleItems:function(){var t=this.getAllItems();var e=this;var s=[];if(t&&t.length){s=[].filter.call(t,function(t){return e.isVisibleItem(t)&&!e.isDisabled(t)})}return s},getHiddenItems:function(){var t=this.getAllItems();var e=[];var s=this;if(t&&t.length){e=[].filter.call(t,function(t){return!s.isVisibleItem(t)&&!s.isDisabled(t)})}return e},getDisabledItems:function(){var t=this.getAllItems();var e=[];var s=this;if(t&&t.length){e=[].filter.call(t,function(t){return s.isDisabled(t)})}return e},getMoreButton:function(){var t=this.getAllItems();var e=null;var s=this;if(t&&t.length){[].map.call(t,function(t){if(BX.hasClass(t,s.classItemMore)){e=t;return}})}return e},getLastVisibleItem:function(){var t=this.getVisibleItems();var e=null;if(BX.type.isArray(t)&&t.length){e=t[t.length-1]}if(!BX.type.isDomNode(e)){e=null}return e},adjustMoreButtonPosition:function(){var t=this.getLastVisibleItem();var e=this.isMoreButton(t);var s=!e&&!this.moreButton.offsetTop;var i=null;if(e){return}if(s){i=this.findNextSiblingByClass(t,this.classItem);if(BX.type.isDomNode(i)){this.listContainer.insertBefore(this.moreButton,i)}else{this.listContainer.appendChild(this.moreButton)}}else{this.listContainer.insertBefore(this.moreButton,t)}this.adjustMoreButtonPosition()},getSubmenuId:function(t){var e="";if(BX.type.isDomNode(this.listContainer)&&BX.type.isNotEmptyString(this.listContainer.id)){e=this.submenuIdPrefix+this.listContainer.id}if(t){e=this.submenuWindowIdPrefix+e}return e},getSubmenuItemText:function(t){var e,s,i;if(!BX.type.isDomNode(t)){return}e=this.findChildrenByClassName(t,this.classItemText);s=this.findChildrenByClassName(t,this.classItemCounter);if(BX.type.isDomNode(s)&&BX.type.isDomNode(e)){i=e.outerHTML+s.outerHTML}else{e=this.dataValue(t,"text");s=this.dataValue(t,"counter");i=e}return i},adjustSubmenuPosition:function(){var t,e,s,i;if(!this.isSubmenuShown){return}t=this.getSubmenu();if(t===null){return}e=t.popupWindow;s=document.getElementById("morebutton");i=e.getBindElementPos(s);e.adjustPosition(i)},getLockedClass:function(t){var e="";if(BX.type.isDomNode(t)&&this.isLocked(t)){e=this.classItemLocked}return e},getSubmenuItems:function(){var t=this.getAllItems();var e=this.getHiddenItems();var s=this.getDisabledItems();var i=[];var n=this;if(t.length){[].map.call(t,function(t){if(e.indexOf(t)===-1&&s.indexOf(t)===-1){i.push({text:n.getSubmenuItemText(t),href:n.dataValue(t,"url"),className:[n.classSubmenuItem,n.getIconClass(t),n.classSecret,n.getAliasLink(t),n.getLockedClass(t)].join(" ")})}})}if(e.length){[].map.call(e,function(t){i.push({text:n.getSubmenuItemText(t),href:n.dataValue(t,"url"),className:[n.classSubmenuItem,n.getIconClass(t),n.getAliasLink(t),n.getLockedClass(t)].join(" ")})})}if(s.length){i.push({text:"&nbsp;",className:[this.classSeporator,this.classSubmenuItem].join(" ")});[].map.call(s,function(t){i.push({text:n.getSubmenuItemText(t),href:n.dataValue(t,"url"),className:[n.classSubmenuItem,n.classItemDisabled,n.getIconClass(t),n.getAliasLink(t),n.getLockedClass(t)].join(" ")})})}i.push({text:this.message("MIB_DROPZONE_TEXT"),className:[this.classDropzone,this.classSubmenuItem].join(" ")});return i},getSubmenuArgs:function(){var t=this.getSubmenuId();var e=this.moreButton;var s=BX.pos(e);var i=this.getSubmenuItems();var n={autoHide:true,offsetLeft:s.width/2-18,angle:{position:"top",offset:s.width/2-8},events:{onPopupClose:BX.delegate(this._onSubmenuClose,this),onPopupShow:BX.delegate(this.dragAndDropInitInSubmenu,this)}};return[t,e,i,n]},visibleControllMoreButton:function(){var t=this.getHiddenItems();var e=this.getDisabledItems();if(!t.length&&!e.length&&this.dragItem===null){this.closeSubmenu();BX.hide(this.moreButton);return}else{BX.show(this.moreButton)}},createSubmenu:function(){var t=this.getSubmenuArgs();if(BX.type.isArray(t)){BX.PopupMenu.create.apply(BX.PopupMenu,t)}},showSubmenu:function(){var t=this.getSubmenu();if(t!==null){t.popupWindow.show()}else{this.createSubmenu();t=this.getSubmenu();t.popupWindow.show()}this.setSubmenuShown(true);this.activateItem(this.moreButton)},closeSubmenu:function(){var t=this.getSubmenu();if(t===null){return}t.popupWindow.close();this.deactivateItem(this.moreButton);this.setSubmenuShown(false)},getSubmenu:function(){return BX.PopupMenu.getMenuById(this.getSubmenuId())},destroySubmenu:function(){BX.PopupMenu.destroy(this.getSubmenuId())},refreshSubmenu:function(){var t=this.getSubmenu();var e;if(t===null){return}e=this.getSubmenuArgs();if(BX.type.isArray(e)){this.destroySubmenu();BX.PopupMenu.show.apply(BX.PopupMenu,e)}},setSubmenuShown:function(t){this.isSubmenuShown=false;if(BX.type.isBoolean(t)){this.isSubmenuShown=t}},activateItem:function(t){if(!BX.type.isDomNode(t)){return}if(!BX.hasClass(t,this.classItemActive)){BX.addClass(t,this.classItemActive)}},deactivateItem:function(t){if(!BX.type.isDomNode(t)){return}if(BX.hasClass(t,this.classItemActive)){BX.removeClass(t,this.classItemActive)}},getCurrentSettings:function(){var t=this.getAllItems();var e={};var s=this;if(t&&t.length){[].map.call(t,function(t,i){e[t.id]={sort:i,isDisabled:s.isDisabled(t)}})}return e},saveSettings:function(){var t=this.getCurrentSettings();var e="settings";var s;if(!BX.type.isPlainObject(t)){return}if(BX.type.isDomNode(this.listContainer)&&"id"in this.listContainer){s=this.listContainer.id}t=JSON.stringify(t);BX.userOptions.save("UI",s,e,t,true)},moveButtonAlias:function(t){var e,s;if(!t||!this.dragItem){return}e=this.getItemAlias(this.dragItem);s=this.getItemAlias(t);if(this.isListItem(e)){if(!s){this.listContainer.appendChild(e)}else{this.listContainer.insertBefore(e,s)}}},moveButton:function(t){var e;if(!BX.type.isDomNode(t)||!BX.type.isDomNode(this.dragItem)){return}if(this.isListItem(t)){if(this.isDisabled(this.dragItem)){this.dragItem.dataset.disabled="false"}if(BX.type.isDomNode(t)){this.listContainer.insertBefore(this.dragItem,t)}else{this.listContainer.appendChild(this.dragItem)}}if(this.isSubmenuItem(t)){if(this.isDisabled(this.dragItem)&&!this.isDisabled(t)){this.enableItem(this.dragItem)}e=this.getSubmenuContainer();e.insertBefore(this.dragItem,t)}},getSubmenuContainer:function(){var t=this.getSubmenu();var e=null;if(t!==null){e=t.itemsContainer}return e},findNextSiblingByClass:function(t,e){var s=t;for(;t&&t!==document;t=t.nextSibling){if(e){if(BX.hasClass(t,e)&&t!==s){return t}}else{return null}}},findParentByClassName:function(t,e){for(;t&&t!==document;t=t.parentNode){if(e){if(BX.hasClass(t,e)){return t}}else{return null}}},findChildrenByClassName:function(t,e){var s=null;if(BX.type.isDomNode(t)&&BX.type.isNotEmptyString(e)){s=BX.findChildren(t,{className:e},true);if(BX.type.isArray(s)&&s.length){s=s[0]}}return s},dragAndDropInit:function(){var t=this.getAllItems();var e=this;[].forEach.call(t,function(t,s){t.draggable=true;t.tabindex=-1;t.dataset.link="item"+s;BX.bind(t,"mouseover",BX.delegate(e._onMouse,e));BX.bind(t,"mouseout",BX.delegate(e._onMouse,e));BX.bind(t,"dragstart",BX.delegate(e._onDragStart,e));BX.bind(t,"dragend",BX.delegate(e._onDragEnd,e));BX.bind(t,"dragenter",BX.delegate(e._onDragEnter,e));BX.bind(t,"dragover",BX.delegate(e._onDragOver,e));BX.bind(t,"dragleave",BX.delegate(e._onDragLeave,e))})},dragAndDropInitInSubmenu:function(){var t=this.getSubmenu();var e=t.menuItems;var s=this;[].forEach.call(e,function(t){t.layout.item.draggable=true;t.layout.item.dataset.sortable=true;BX.bind(t.layout.item,"dragstart",BX.delegate(s._onDragStart,s));BX.bind(t.layout.item,"dragenter",BX.delegate(s._onDragEnter,s));BX.bind(t.layout.item,"dragover",BX.delegate(s._onDragOver,s));BX.bind(t.layout.item,"dragleave",BX.delegate(s._onDragLeave,s));BX.bind(t.layout.item,"dragend",BX.delegate(s._onDragEnd,s));if(s.isDropzone(t.layout.item)){BX.bind(t.layout.item,"drop",BX.delegate(s._onDrop,s))}BX.bind(t.layout.item,"click",BX.delegate(s._onClick,s))})},getItem:function(t){var e=null;if(!t||!BX.type.isDomNode(t.target)){return}e=this.findParentByClassName(t.target,this.classItem);if(!BX.type.isDomNode(e)){e=this.findParentByClassName(t.target,this.classSubmenuItem)}return e},setOpacity:function(t){if(!BX.type.isDomNode(t)){return}BX.style(t,"opacity",".6")},unsetOpacity:function(t){if(!BX.type.isDomNode(t)){return}BX.style(t,"opacity","1")},setSubmenuContainer:function(t){this.submenuContainer=t},setDragStyles:function(){BX.addClass(this.listContainer,this.classOnDrag);BX.addClass(BX(this.getSubmenuId(true)),this.classOnDrag);this.setOpacity(this.dragItem);this.setOpacity(this.moreButton)},unsetDragStyles:function(){var t=this.getAllItems();var e=this.getSubmenu();var s=this;if(t&&t.length){[].forEach.call(t,function(t){s.unsetOpacity(t);BX.removeClass(t,"over")})}if(e&&"menuItems"in e&&BX.type.isArray(e.menuItems)&&e.menuItems.length){[].forEach.call(e.menuItems,function(t){s.unsetOpacity(t);BX.removeClass(t.layout.item,"over")})}BX.removeClass(this.listContainer,this.classOnDrag);BX.removeClass(BX(this.getSubmenuId(true)),this.classOnDrag)},getIconClass:function(t){var e="";if(BX.type.isDomNode(t)&&"dataset"in t&&"class"in t.dataset&&BX.type.isNotEmptyString(t.dataset.class)){e=t.dataset.class}return e},disableItem:function(t){var e=this.getItemAlias(t);if(t&&"dataset"in t){t.dataset.disabled="true";if(e){e.dataset.disabled="true"}}},enableItem:function(t){var e;if(!BX.type.isDomNode(t)){return}if(this.isSubmenuItem(t)){BX.removeClass(t,this.classItemDisabled);e=this.getItemAlias(t);if(BX.type.isDomNode(e)){e.dataset.disabled="false"}}},getAliasLink:function(t){return this.dataValue(t,"link")||""},getItemAlias:function(t){var e=null;var s=this;var i,n,a;if(!BX.type.isDomNode(t)){return e}a=this.getAllItems();i=this.isSubmenuItem(t);n=this.isListItem(t);if(!i&&!n){return e}if(i){[].forEach.call(a,function(i){if(BX.hasClass(t,s.getAliasLink(i))){e=i}})}if(n){e=BX.findChildren(document,{"class":this.getAliasLink(t)},true);if(BX.type.isArray(e)&&e.length){e=e[0]}}return e},hideItem:function(t){if(BX.type.isDomNode){BX.addClass(t,this.classSecret)}},showItem:function(t){if(BX.type.isDomNode){BX.removeClass(t,this.classSecret)}},fakeDragItem:function(){var t=null;if(!BX.type.isDomNode(this.dragItem)||!BX.type.isDomNode(this.overItem)){return}if(this.isDragToSubmenu()){t=this.getItemAlias(this.dragItem);if(t!==this.dragItem){this.listContainer.appendChild(this.dragItem);this.dragItem=t;this.showItem(this.dragItem);this.adjustMoreButtonPosition();this.updateSubmenuItems();this.tmp.moved=false}}if(this.isDragToList()){t=this.getItemAlias(this.dragItem);if(t!==this.dragItem){this.hideItem(this.dragItem);this.dragItem=t;this.adjustMoreButtonPosition();this.updateSubmenuItems()}}},updateSubmenuItems:function(){var t=this.getHiddenItems();var e=this.getDisabledItems();var s=this;var i=[];var n,a,o;n=this.getSubmenu();if(n===null){return}a=n.menuItems;if(!BX.type.isArray(a)||!a.length){return}i=e.concat(t);a.forEach(function(t){o=[].some.call(i,function(e){return BX.hasClass(t.layout.item,s.dataValue(e,"link"))||s.isDisabled(t.layout.item)||s.isSeporator(t.layout.item)||s.isDropzone(t.layout.item)});if(o){s.showItem(t.layout.item)}else{s.hideItem(t.layout.item)}})},setOverStyles:function(t){if(BX.type.isDomNode(t)&&!BX.hasClass(t,this.classItemOver)){BX.addClass(t,this.classItemOver)}},unsetOverStyles:function(t){if(BX.type.isDomNode(t)&&BX.hasClass(t,this.classItemOver)){BX.removeClass(t,this.classItemOver)}},dataValue:function(t,e){var s="";var i;if(BX.type.isDomNode(t)){i=BX.data(t,e);if(typeof i!=="undefined"){s=i}}return s},execScript:function(script){if(BX.type.isNotEmptyString(script)){eval(script)}},showLicenseWindow:function(){var t;if(!B24.licenseInfoPopup){return}t=B24.licenseInfoPopup;t.init({B24_LICENSE_BUTTON_TEXT:this.message("MIB_LICENSE_BUY_BUTTON"),B24_TRIAL_BUTTON_TEXT:this.message("MIB_LICENSE_TRIAL_BUTTON"),IS_FULL_DEMO_EXISTS:this.licenseParams.isFullDemoExists,HOST_NAME:this.licenseParams.hostname,AJAX_URL:this.licenseParams.ajaxUrl,LICENSE_ALL_PATH:this.licenseParams.licenseAllPath,LICENSE_DEMO_PATH:this.licenseParams.licenseDemoPath,FEATURE_GROUP_NAME:this.licenseParams.featureGroupName,AJAX_ACTIONS_URL:this.licenseParams.ajaxActionsUrl,B24_FEATURE_TRIAL_SUCCESS_TEXT:this.message("MIB_LICENSE_WINDOW_TRIAL_SUCCESS_TEXT")});t.show("main-buttons",this.message("MIB_LICENSE_WINDOW_HEADER_TEXT"),this.message("MIB_LICENSE_WINDOW_TEXT"))},_onDragStart:function(t){this.dragItem=this.getItem(t);if(!BX.type.isDomNode(this.dragItem)){return}if(this.isMoreButton(this.dragItem)){t.preventDefault();return}if(this.isSubmenuShown){this.isSubmenuShownOnDragStart=true}else{this.isSubmenuShownOnDragStart=false}if(this.isListItem(this.dragItem)){this.visibleControllMoreButton();this.showSubmenu()}this.setDragStyles()},_onDragEnd:function(t){t.preventDefault();var e=this.getItem(t);if(!BX.type.isDomNode(e)){return}this.unsetDragStyles();if(!this.isSubmenuShownOnDragStart){this.refreshSubmenu();this.closeSubmenu()}else{this.refreshSubmenu()}this.saveSettings();this.dragItem=null;this.overItem=null;this.tmp.moved=false;this.visibleControllMoreButton()},_onDragEnter:function(t){var e=this.getItem(t);if(!BX.type.isDomNode(e)||!this.isDropzone(e)){return}},_onDragOver:function(t){t.preventDefault();var e=null;this.overItem=this.getItem(t);if(!BX.type.isDomNode(this.overItem)||!BX.type.isDomNode(this.dragItem)||this.overItem===this.dragItem||this.isDisabled(this.overItem)){return}else if(this.isDropzone(this.overItem)){this.setOverStyles(this.overItem);return}this.fakeDragItem();if(this.isNext(t)&&this.isGoodPosition(t)&&!this.isMoreButton(this.overItem)){e=this.findNextSiblingByClass(this.overItem,this.classItem);if(this.isMoreButton(e)&&!this.tmp.moved){e=e.previousElementSibling;this.tmp.moved=true}if(!BX.type.isDomNode(e)){e=this.findNextSiblingByClass(this.overItem,this.classSubmenuItem)}if(BX.type.isDomNode(e)){this.moveButton(e);this.moveButtonAlias(e);this.adjustMoreButtonPosition();this.updateSubmenuItems()}}if(!this.isNext(t)&&this.isGoodPosition(t)&&!this.isMoreButton(this.overItem)||!this.isGoodPosition(t)&&this.isMoreButton(this.overItem)&&this.getVisibleItems().length===1){this.moveButton(this.overItem);this.moveButtonAlias(this.overItem);this.adjustMoreButtonPosition();this.updateSubmenuItems()}},_onDragLeave:function(t){var e=this.getItem(t);if(BX.type.isDomNode(e)){this.unsetOverStyles(t.target)}},_onDrop:function(t){var e=this.getItem(t);if(!BX.type.isDomNode(e)){return}if(this.isDropzone(e)){this.disableItem(this.dragItem);this.adjustMoreButtonPosition()}this.unsetDragStyles()},_onSubmenuClose:function(){this.deactivateItem(this.moreButton);this.setSubmenuShown(false)},_onResizeHandler:function(){this.adjustMoreButtonPosition();this.visibleControllMoreButton();this.updateSubmenuItems()},_onClickMoreButton:function(t){t.preventDefault();this.showSubmenu()},_onMouse:function(t){var e=this.getItem(t);if(t.type==="mouseover"&&!BX.hasClass(e,this.classItemOver)){BX.addClass(e,this.classItemOver)}if(t.type==="mouseout"&&BX.hasClass(e,this.classItemOver)){BX.removeClass(e,this.classItemOver)}},_onClick:function(t){var e=null;var s;if(!this.isSublink(t.target)){e=this.getItem(t);if(!BX.type.isDomNode(e)){return}s=this.dataValue(e,"onclick");if(BX.type.isNotEmptyString(s)){t.preventDefault();this.execScript(s)}}e=this.getItem(t);if(BX.type.isDomNode(e)&&this.isLocked(e)){t.preventDefault();this.showLicenseWindow()}},_onScroll:function(){if(BX.style(this.pinContainer,"position")==="fixed"){this.closeSubmenu()}},isDisabled:function(t){var e=false;if(BX.type.isDomNode(t)){e=this.dataValue(t,"disabled")==="true"||BX.hasClass(t,this.classItemDisabled)}return e},isLocked:function(t){var e=false;if(BX.type.isDomNode(t)){e=this.dataValue(t,"locked")==="true"||BX.hasClass(t,this.classItemLocked)}return e},isDropzone:function(t){return BX.hasClass(t,this.classDropzone)},isOvered:function(t){return BX.hasClass(t,this.classItemOver)},isNext:function(t){var e=this.dragItem.getBoundingClientRect();var s=this.overItem.getBoundingClientRect();var i=getComputedStyle(this.dragItem);var n=parseInt(i.marginRight.replace("px",""));var a=null;if(this.isListItem(this.overItem)){a=t.clientX>s.left-n&&t.clientX>e.right}if(this.isSubmenuItem(this.overItem)){a=t.clientY>e.top}return a},isGoodPosition:function(t){var e=this.overItem;var s,i;if(!BX.type.isDomNode(e)){return}s=e.getBoundingClientRect();if(this.isListItem(e)){i=this.isNext(t)&&t.clientX>=s.left+s.width/2||!this.isNext(t)&&t.clientX<=s.left+s.width/2}if(this.isSubmenuItem(e)){i=this.isNext(t)&&t.clientY>=s.top+s.height/2||!this.isNext(t)&&t.clientY<=s.top+s.height/2}return i},isSubmenuItem:function(t){return BX.hasClass(t,this.classSubmenuItem)},isVisibleItem:function(t){if(!BX.type.isDomNode(t)){return}return t.offsetTop===0},isMoreButton:function(t){var e=false;if(BX.type.isDomNode(t)&&BX.hasClass(t,this.classItemMore)){e=true}return e},isListItem:function(t){var e=false;if(BX.type.isDomNode(t)&&BX.hasClass(t,this.classItem)){e=true}return e},isSublink:function(t){var e=false;if(BX.type.isDomNode(t)){e=BX.hasClass(t,this.classItemSublink)}return e},isSeporator:function(t){var e=false;if(BX.type.isDomNode(t)){e=BX.hasClass(t,this.classSeporator)}return e},isDragToSubmenu:function(){return!this.isSubmenuItem(this.dragItem)&&this.isSubmenuItem(this.overItem)},isDragToList:function(){return this.isSubmenuItem(this.dragItem)&&!this.isSubmenuItem(this.overItem)}}}if(typeof BX.Main.interfaceButtonsManager==="undefined"){BX.Main.interfaceButtonsManager={data:{},init:function(t){var e=null;if(!BX.type.isPlainObject(t)||!("containerId"in t)){throw"BX.Main.interfaceButtonsManager: containerId not set in params Object"}e=BX(t.containerId);if(BX.type.isDomNode(e)){this.data[t.containerId]=new BX.Main.interfaceButtons(e,t)}else{BX(BX.delegate(function(){e=BX(t.containerId);if(!BX.type.isDomNode(e)){throw"BX.Main.interfaceButtonsManager: container is not dom node"}this.data[t.containerId]=new BX.Main.interfaceButtons(e,t)},this))}},getById:function(t){var e=null;if(BX.type.isString(t)&&BX.type.isNotEmptyString(t)){try{e=this.data[t]}catch(s){}}return e}}}
//# sourceMappingURL=script.map.js